<p><span class="asLink" ng-click="$ctrl.goBack()">Retour</span></p>
<h2>{{$ctrl.team.name}}, saison {{$ctrl.team.season.name}}, {{$ctrl.team.category.name}}</h2>
<div ng-if="$ctrl.team.feePaymentDate !== undefined">
    <h3>Frais d'inscription</h3>
    <p>
        <span ng-if="$ctrl.team.feePaymentDate">
            Payés le {{$ctrl.team.feePaymentDate}}
        </span>
        <span ng-if="!$ctrl.team.feePaymentDate">
            Non-payés
        </span>
    </p>
</div>
<h3>Responsable d'équipe</h3>
<p>
    {{$ctrl.team.manager.firstName}} {{$ctrl.team.manager.lastName}}<br />
    {{$ctrl.team.manager.email}}<br />
    {{$ctrl.team.manager.phoneNumber}}<br />
    {{$ctrl.team.manager.mobileNumber}}
</p>
<h3>Salle pour les matchs à domicile</h3>
<p><a href="/lieu/{{$ctrl.team.homeVenue.id}}">{{$ctrl.team.homeVenue.name}}</a></p>
<h3>Joueuses et joueurs</h3>
<ul>
    <li ng-repeat="player in $ctrl.players">
        {{player.firstName}} {{player.lastName}}
        <span ng-if="player.licensePaymentDate !== undefined">
            <span class="label label--ok" ng-if="player.licensePaymentDate">Payé</span>
            <span class="label label--error" ng-if="!player.licensePaymentDate">Non-payé</span>
        </span>
    </li>
</ul>
<!-- Hacky way to hide the form. If the user cannot see the payment date, he cannot add players -->
<form ng-if="$ctrl.team.feePaymentDate !== undefined"
      name="addPlayersForm"
      class="adminForm"
      novalidate>
    <label>Ajouter des joueurs</label>
    <tags-input ng-model="$ctrl.newPlayers"
                add-from-autocomplete-only="true"
                display-property="fullName"
                display-key="id"
                replace-spaces-with-dashes="false">
        <auto-complete source="$ctrl.loadMembersForNewPlayers($query)"
                       display-property="fullName">
        </auto-complete>
    </tags-input>
    <div class="formActions">
        <button class="button button--primary"
                ng-click="$ctrl.submitNewPlayers()"
                ng-disabled="addPlayersForm.$invalid || $ctrl.sendingNewPlayers">
            Ajouter
        </button>
    </div>
</form>